{"version":3,"sources":["components/Arrow.js","components/Card.js","components/ErrorBanner.js","components/InputBox.js","components/PercentageOverlay.js","lib/storage/VideoProgress.js","lib/storage/base.js","components/MovieRow.js","components/Progress.js","hooks/useMovie.js","components/Title.js","components/TypeSelector.js","lib/scraper/theflix.js","lib/scraper/trailersto.js","lib/scraper/xemovie.js","lib/scraper/akwam.js","lib/index.js","views/Search.js","components/VideoPlaceholder.js","components/VideoElement.js","components/NumberSelector.js","components/SelectBox.js","components/EpisodeSelector.js","hooks/useWindowSize.js","views/Movie.js","App.js","index.js"],"names":["Arrow","props","className","dangerouslySetInnerHTML","__html","left","Card","React","useState","showing","setShowing","measureRef","useRef","height","setHeight","useEffect","current","show","clientHeight","fullWidth","doTransition","style","ref","children","ErrorBanner","InputBox","onSubmit","placeholder","searchTerm","setSearchTerm","e","preventDefault","type","id","value","onChange","target","required","PercentageOverlay","percentage","Math","max","width","Fragment","VideoProgressStore","_data","versionList","maxVersion","versions","storageString","instanceHelpers","staticHelpers","setKey","str","this","addVersion","version","migrate","create","Error","push","toString","update","data","init","registerHelper","name","helper","constructor","String","Function","includes","build","versionListSorted","sort","a","b","forEach","v","i","arr","d","currentVersion","get","store","localStorage","getItem","JSON","parse","console","error","Object","_","save","setItem","stringify","entries","undefined","bind","obj","Number","buildStoreObject","MovieRow","progress","progressData","source","movie","slug","full","floor","currentlyAt","totalDuration","tabIndex","onKeyPress","event","code","onClick","viewBox","fill","xmlns","title","year","place","season","episode","Progress","failed","text","length","steps","toFixed","MovieContext","createContext","MovieProvider","page","setPage","stream","setStream","streamData","setStreamData","Provider","navigate","setStreamUrl","streamUrl","p","resetStreamData","useMovie","useContext","Title","history","useHistory","size","accentLink","accent","handleAccentClick","TypeSelector","setType","choices","selected","noWrap","selectedIndex","findIndex","transformStyles","opacity","transform","map","choice","label","BASE_URL","process","term","toLowerCase","fetch","then","tmdbRes","doc","DOMParser","parseFromString","nodes","Array","from","querySelectorAll","results","slice","node","querySelector","getAttribute","textContent","trim","split","replace","options","sNodes","seasons","episodes","s","epRes","url","res","scripts","prop","find","pageProps","videoUrl","theflix","findContent","getStreamUrl","getEpisodes","json","subs","filter","sub","MetaInfo","SubDownloadLink","LanguageCode","response","subtitles","phpsessid","trailersto","CORS_URL","encodeURIComponent","r","searchPage","parser","getElementById","parentElement","innerText","href","pop","fuse","Fuse","threshold","distance","keys","matchedResults","search","result","item","getVideoUrl","config","endsWith","headers","pageReq","reverse","_docs","pageRes","pageResText","episodeObj","xemovie","searchUrl","searchRes","surl","videoDoc","alt","akwam","Promise","all","o","SearchView","routeMatch","useRouteMatch","params","streamRouteMatch","setOptions","setProgress","setText","setFailed","showingOptions","setShowingOptions","errorStatus","setErrorStatus","continueWatching","setContinueWatching","fail","getStream","realUrl","query","contentType","catch","fetchHealth","newContinueWatching","values","subselection","entry","percentageDone","meta","newShow","parseInt","updatedAt","to","handleKeyPress","Helmet","searchMovie","reduce","deletable","newCW","progressSave","window","location","reload","color","paddingLeft","rel","VideoPlaceholder","VideoElement","loading","videoRef","startTime","setError","onLoad","currentTime","hls","Hls","isSupported","canPlayType","src","attachMedia","loadSource","crossOrigin","controls","autoPlay","onProgress","onLoadedData","index","kind","LanguageName","ContentHash","NumberSelector","Option","option","htmlFor","SelectBox","selectedItem","setSelectedItem","isArray","active","setActive","containerRef","handleClick","contains","closeDropdown","document","addEventListener","removeEventListener","onOptionClick","stopPropagation","handleOptionKeyPress","opt","EpisodeSelector","setSelectedSeason","selectedSeason","setEpisode","currentSeason","currentEpisode","round","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","useWindowSize","MovieView","baseRouteMatch","showRouteMatch","seasonList","setSeasonList","episodeLists","setEpisodeList","setLoading","setStartTime","isVideoTimeSet","cancel","key","time","evt","currentTarget","duration","Date","now","Router","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.784096e1.chunk.js","sourcesContent":["import React from 'react'\nimport './Arrow.css'\n\n// left?: boolean\nexport function Arrow(props) {\n    return (\n        <span className=\"arrow\" dangerouslySetInnerHTML={{ __html: `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather ${props.left?'left':''}\"}>\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                <polyline points=\"12 5 19 12 12 19\"></polyline>\n            </svg>\n        `}}>\n        </span>\n    )\n}\n","import React from 'react'\r\nimport './Card.css'\r\n\r\n// fullWidth: boolean\r\n// show: boolean\r\n// doTransition: boolean\r\nexport function Card(props) {\r\n\r\n    const [showing, setShowing] = React.useState(false);\r\n    const measureRef = React.useRef(null)\r\n    const [height, setHeight] = React.useState(0);\r\n\r\n    React.useEffect(() => {\r\n        if (!measureRef?.current) return;\r\n        setShowing(props.show);\r\n        setHeight(measureRef.current.clientHeight)\r\n    }, [props.show, measureRef])\r\n\r\n    return (\r\n        <div className={`card-wrapper ${ props.fullWidth ? 'full' : '' } ${ props.doTransition ? 'overflow-hidden' : '' }`} style={{\r\n            height: props.doTransition ? (showing ? height : 0) : \"initial\",\r\n        }}>\r\n            <div className={`card ${ showing ? 'show' : '' } ${ props.doTransition ? 'doTransition' : '' }`} ref={measureRef}>\r\n                {props.children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\nimport './ErrorBanner.css';\n\nexport function ErrorBanner({children}) {\n\treturn (\n\t\t<div className=\"errorBanner\">\n\t\t\t{children}\n\t\t</div>\n\t)\n}","import React from 'react';\nimport { Arrow } from './Arrow';\nimport './InputBox.css'\n\n// props = { onSubmit: (str) => {}, placeholder: string}\nexport function InputBox({ onSubmit, placeholder }) {\n    const [searchTerm, setSearchTerm] = React.useState(\"\");\n\n    return (\n        <form className=\"inputBar\" onSubmit={(e) => {\n            e.preventDefault();\n            onSubmit(searchTerm)\n            return false;\n        }}>\n            <input\n                type='text'\n                className=\"inputTextBox\"\n                id=\"inputTextBox\"\n                placeholder={placeholder}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                required\n            />\n            <button className=\"inputSearchButton\">\n                <span className=\"text\">Search<span className=\"arrow\"><Arrow /></span></span>\n            </button>\n        </form>\n    )\n}\n","import React from 'react'\nimport './PercentageOverlay.css'\n\nexport function PercentageOverlay({ percentage }) {\n\n\tif(percentage && percentage > 3) percentage = Math.max(20, percentage < 90 ? percentage : 100)\n\n\treturn percentage > 0 ? (\n\t\t<div className=\"progressBar\">\n            <div className=\"progressBarInner\" style={{width: `${percentage}%`}}></div>\n        </div>\n\t) : <React.Fragment></React.Fragment>\n}","import { versionedStoreBuilder } from './base.js';\r\n\r\n/*\r\nversion 0\r\n{\r\n    [{scraperid}]: {\r\n        movie: {\r\n            [{movie-id}]: {\r\n                full: {\r\n                    currentlyAt: number,\r\n                    totalDuration: number,\r\n                    updatedAt: number, // unix timestamp in ms\r\n                    meta: FullMetaObject, // no idea whats in here\r\n                }\r\n            }\r\n        },\r\n        show: {\r\n            [{show-id}]: {\r\n                [{season}-{episode}]: {\r\n                    currentlyAt: number,\r\n                    totalDuration: number,\r\n                    updatedAt: number, // unix timestamp in ms\r\n                    show: {\r\n                        episode: string,\r\n                        season: string,\r\n                    },\r\n                    meta: FullMetaObject, // no idea whats in here\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n*/\r\n\r\nexport const VideoProgressStore = versionedStoreBuilder()\r\n    .setKey('video-progress')\r\n    .addVersion({\r\n        version: 0,\r\n        create() {\r\n            return {}\r\n        }\r\n    })\r\n    .build()\r\n","function buildStoreObject(d) {\r\n    const data = {\r\n        versions: d.versions,\r\n        currentVersion: d.maxVersion,\r\n        id: d.storageString,\r\n    }\r\n\r\n    function update(obj) {\r\n        if (!obj)\r\n            throw new Error(\"object to update is not an object\");\r\n\r\n        // repeat until object fully updated\r\n        if (obj[\"--version\"] === undefined)\r\n            obj[\"--version\"] = 0;\r\n        while (obj[\"--version\"] !== this.currentVersion) {\r\n            // get version\r\n            let version = obj[\"--version\"] || 0;\r\n            if (version.constructor !== Number || version < 0)\r\n                version = -42; // invalid on purpose so it will reset\r\n            else {\r\n                version = (version+1).toString()\r\n            }\r\n            \r\n            // check if version exists\r\n            if (!this.versions[version]) {\r\n                console.error(`Version not found for storage item in store ${this.id}, resetting`);\r\n                obj = null;\r\n                break;\r\n            }\r\n\r\n            // update object\r\n            obj = this.versions[version].update(obj);\r\n        }\r\n\r\n        // if resulting obj is null, use latest version as init object\r\n        if (obj === null) {\r\n            console.error(`Storage item for store ${this.id} has been reset due to faulty updates`);\r\n            return this.versions[this.currentVersion.toString()].init();\r\n        }\r\n\r\n        // updates succesful, return\r\n        return obj;\r\n    }\r\n\r\n    function get() {\r\n        // get from storage api\r\n        const store = this;\r\n        let data = localStorage.getItem(this.id);\r\n\r\n        // parse json if item exists\r\n        if (data) {\r\n            try {\r\n                data = JSON.parse(data);\r\n                if (!data.constructor) {\r\n                    console.error(`Storage item for store ${this.id} has not constructor`)\r\n                    throw new Error(\"storage item has no constructor\")\r\n                }\r\n                if (data.constructor !== Object) {\r\n                    console.error(`Storage item for store ${this.id} is not an object`)\r\n                    throw new Error(\"storage item is not an object\")\r\n                }\r\n            } catch (_) {\r\n                // if errored, set to null so it generates new one, see below\r\n                console.error(`Failed to parse storage item for store ${this.id}`)\r\n                data = null;\r\n            }\r\n        }\r\n\r\n        // if item doesnt exist, generate from version init\r\n        if (!data) {\r\n            data = this.versions[this.currentVersion.toString()].init();\r\n        }\r\n\r\n        // update the data if needed\r\n        data = this.update(data);\r\n\r\n        // add a save object to return value\r\n        data.save = function save() {\r\n            localStorage.setItem(store.id, JSON.stringify(data));\r\n        }\r\n        \r\n        // add instance helpers\r\n        Object.entries(d.instanceHelpers).forEach(([name, helper]) => {\r\n            if (data[name] !== undefined)\r\n                throw new Error(`helper name: ${name} on instance of store ${this.id} is reserved`)\r\n            data[name] = helper.bind(data);\r\n        })\r\n\r\n        // return data\r\n        return data;\r\n    }\r\n\r\n    // add functions to store\r\n    data.get = get.bind(data);\r\n    data.update = update.bind(data);\r\n\r\n    // add static helpers\r\n    Object.entries(d.staticHelpers).forEach(([name, helper]) => {\r\n        if (data[name] !== undefined)\r\n            throw new Error(`helper name: ${name} on store ${data.id} is reserved`)\r\n        data[name] = helper.bind({});\r\n    })\r\n\r\n    return data;\r\n}\r\n\r\n/*\r\n * Builds a versioned store\r\n *\r\n * manages versioning of localstorage items\r\n*/\r\nexport function versionedStoreBuilder() {\r\n    return {\r\n        _data: {\r\n            versionList: [],\r\n            maxVersion: 0,\r\n            versions: {},\r\n            storageString: null,\r\n            instanceHelpers: {},\r\n            staticHelpers: {},\r\n        },\r\n\r\n        /*\r\n         * set key of localstorage item, must be unique\r\n        */\r\n        setKey(str) {\r\n            this._data.storageString = str;\r\n            return this;\r\n        },\r\n\r\n        /*\r\n         * add a version to the store\r\n         *\r\n         * version: version number\r\n         * migrate: function to update from previous version to this version\r\n         * create: function to return an empty storage item from this version (in correct syntax)\r\n        */\r\n        addVersion({ version, migrate, create }) {\r\n            // input checking\r\n            if (version < 0)\r\n                throw new Error(\"Cannot add version below 0 in store\");\r\n            if (version > 0 && !migrate)\r\n                throw new Error(`Missing migration on version ${version} (needed for any version above 0)`);\r\n\r\n            // update max version list\r\n            if (version > this._data.maxVersion)\r\n                this._data.maxVersion = version;\r\n            // add to version list\r\n            this._data.versionList.push(version);\r\n\r\n\r\n            // register version\r\n            this._data.versions[version.toString()] = {\r\n                version: version, // version number\r\n                update: migrate ? (data) => { // update function, and increment version\r\n                    migrate(data);\r\n                    data[\"--version\"] = version;\r\n                    return data;\r\n                } : null,\r\n                init: create ? () => { // return an initial object\r\n                    const data = create();\r\n                    data[\"--version\"] = version;\r\n                    return data;\r\n                } : null\r\n            }\r\n            return this;\r\n        },\r\n\r\n        /*\r\n         * register a instance or static helper to the store \r\n         *\r\n         * name: name of the helper function\r\n         * helper: function to execute, the 'this' context is the current storage item (type is instance)\r\n         * type: \"instance\" or \"static\". instance is put on the storage item when you store.get() it, static is on the store\r\n        */\r\n        registerHelper({ name, helper, type }) {\r\n            // type\r\n            if (!type)\r\n                type = \"instance\"\r\n\r\n            // input checking\r\n            if (!name || name.constructor !== String) {\r\n                throw new Error(\"helper name is not a string\")\r\n            }\r\n            if (!helper || helper.constructor !== Function) {\r\n                throw new Error(\"helper function is not a function\")\r\n            }\r\n            if (![\"instance\", \"static\"].includes(type)) {\r\n                throw new Error(\"helper type must be either 'instance' or 'static'\")\r\n            }\r\n\r\n            // register helper\r\n            if (type === \"instance\")\r\n                this._data.instanceHelpers[name] = helper\r\n            else if (type === \"static\")\r\n                this._data.staticHelpers[name] = helper\r\n\r\n            return this;\r\n        },\r\n\r\n        /*\r\n         * returns function store based on what has been set\r\n        */\r\n        build() {\r\n            // check if version list doesnt skip versions\r\n            const versionListSorted = this._data.versionList.sort((a,b)=>a-b);\r\n            versionListSorted.forEach((v, i, arr) => {\r\n                if (i === 0)\r\n                    return;\r\n                if (v !== arr[i-1]+1)\r\n                    throw new Error(\"Version list of store is not incremental\");\r\n            })\r\n\r\n            // version zero must exist\r\n            if (versionListSorted[0] !== 0)\r\n                throw new Error(\"Version 0 doesn't exist in version list of store\");\r\n\r\n            // max version must have init function\r\n            if (!this._data.versions[this._data.maxVersion.toString()].init)\r\n                throw new Error(`Missing create function on version ${this._data.maxVersion} (needed for latest version of store)`);\r\n\r\n            // check storage string\r\n            if (!this._data.storageString)\r\n                throw new Error(\"storage key not set in store\");\r\n\r\n            // build versioned store\r\n            return buildStoreObject(this._data);\r\n        }\r\n    }\r\n}\r\n","import React from 'react'\nimport { Arrow } from './Arrow'\nimport { PercentageOverlay } from './PercentageOverlay'\nimport { VideoProgressStore } from '../lib/storage/VideoProgress'\nimport './MovieRow.css'\n\n// title: string\n// onClick: () => void\nexport function MovieRow(props) {\n    const progressData = VideoProgressStore.get();\n    let progress;\n    let percentage = null;\n    \n    if (props.type === \"movie\") {\n        progress = progressData?.[props.source]?.movie?.[props.slug]?.full\n        \n        if (progress) {\n            percentage = Math.floor((progress.currentlyAt / progress.totalDuration) * 100)\n        }\n    }\n\n    function handleKeyPress(event){\n        if ((event.code === 'Enter' || event.code === 'Space') && props.onClick){\n            props.onClick();\n        }\n    }\n\n    return (\n        <div className=\"movieRow\" tabIndex={0} onKeyPress={handleKeyPress} onClick={() => props.onClick && props.onClick()}>\n        \n            { props.source === \"trailersto\" && (\n                <div className=\"subtitleIcon\">\n                    <svg id=\"subtitleIcon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M20 4H4C2.897 4 2 4.897 2 6V18C2 19.103 2.897 20 4 20H20C21.103 20 22 19.103 22 18V6C22 4.897 21.103 4 20 4ZM11 10H8V14H11V16H8C6.897 16 6 15.103 6 14V10C6 8.897 6.897 8 8 8H11V10ZM18 10H15V14H18V16H15C13.897 16 13 15.103 13 14V10C13 8.897 13.897 8 15 8H18V10Z\" fill=\"#EEEEEE\"/>\n                    </svg>\n                </div>\n            ) }\n        \n            <div className=\"left\">\n                {/* <Cross /> */}\n                <div className=\"titleWrapper\">\n                    <div className=\"titleText\">\n                        {props.title}\n                        &nbsp;\n                        <span className=\"year\">({props.year})</span>\n                        <span className=\"seasonEpisodeSubtitle\">{props.place ? ` - S${props.place.season}:E${props.place.episode}` : ''}</span>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"watch\">\n                <p>Watch {props.type}</p>\n                <Arrow/>\n            </div>\n            \n            <PercentageOverlay percentage={props.percentage || percentage} />\n        </div>\n    )\n}\n","import React from 'react'\nimport './Progress.css'\n\n// show: boolean\n// progress: number\n// steps: number\n// text: string\n// failed: boolean\nexport function Progress(props) {\n    return (\n        <div className={`progress ${props.show ? '' : 'hide'} ${props.failed ? 'failed' : ''}`}>\n            { props.text && props.text.length > 0 ? (\n                <p>{props.text}</p>) : null}\n            <div className=\"bar\">\n                <div className=\"bar-inner\" style={{\n                    width: (props.progress / props.steps * 100).toFixed(0) + \"%\"\n                }}/>\n            </div>\n        </div>\n    )\n}","import React from 'react'\nconst MovieContext = React.createContext(null)\n\nexport function MovieProvider(props) {\n    const [page, setPage] = React.useState(\"search\");\n    const [stream, setStream] = React.useState(\"\");\n    const [streamData, setStreamData] = React.useState(null); //{ title: \"\", slug: \"\", type: \"\", episodes: [], seasons: [] }) \n\n    return (\n        <MovieContext.Provider value={{\n            navigate(str) {\n                setPage(str)\n            },\n            page,\n            setStreamUrl: setStream,\n            streamUrl: stream,\n            streamData,\n            setStreamData(d) {\n                setStreamData(p => ({...p,...d}))\n            },\n            resetStreamData() { setStreamData(null) }\n        }}>\n            {props.children}\n        </MovieContext.Provider>\n    )\n}\n\nexport function useMovie(props) {\n    return React.useContext(MovieContext);\n}\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useMovie } from '../hooks/useMovie'\nimport { Arrow } from '../components/Arrow'\nimport './Title.css'\n\n// size: \"big\" | \"medium\" | \"small\" | null\n// accent: string | null\n// accentLink: string | null\nexport function Title(props) {\n    const { streamData, resetStreamData } = useMovie();\n    const history = useHistory();\n    const size = props.size || \"big\";\n\n    const accentLink = props.accentLink || \"\";\n    const accent = props.accent || \"\";\n\n    function handleAccentClick(){\n        if (accentLink.length > 0) {\n            history.push(`/${streamData.type}`);\n            resetStreamData();\n        }\n    }\n\n    function handleKeyPress(event){\n        if (event.code === 'Enter' || event.code === 'Space'){\n            handleAccentClick();\n        }\n    }\n    \n    return (\n        <div>\n            {accent.length > 0 ? (\n                <p onClick={handleAccentClick} className={`title-accent ${accentLink.length > 0 ? 'title-accent-link' : ''}`} tabIndex={accentLink.length > 0 ? 0 : undefined} onKeyPress={handleKeyPress}>\n                    {accentLink.length > 0 ? (<Arrow left/>) : null}{accent}\n                </p>\n            ) : null}\n            <h1 className={\"title \" + ( size ? `title-size-${size}` : '' )}>{props.children}</h1>\n        </div>\n    )\n}\n","import React from 'react';\nimport './TypeSelector.css';\n\n// setType: (txt: string) => void\n// choices: { label: string, value: string }[]\n// selected: string\nexport function TypeSelector({ setType, choices, selected, noWrap = false }) {\n  const selectedIndex = choices.findIndex(v => v.value === selected);\n  const transformStyles = {\n    opacity: selectedIndex !== -1 ? 1 : 0,\n    transform: `translateX(${selectedIndex !== -1 ? selectedIndex * 7 : 0}rem)`,\n  };\n\n  const handleKeyPress = choice => event => {\n    if (event.code === 'Enter' || event.code === 'Space') {\n      setType(choice);\n    }\n  };\n\n  return (\n    <div className={`typeSelector ${noWrap ? 'nowrap' : ''}`}>\n      {choices.map(v => (\n        <div\n          key={v.value}\n          className={`choice ${selected === v.value ? 'selected' : ''}`}\n          onClick={() => setType(v.value)}\n          onKeyPress={handleKeyPress(v.value)}\n          tabIndex={0}\n        >\n          {v.label}\n        </div>\n      ))}\n      <div className=\"selectedBar\" style={transformStyles} />\n    </div>\n  );\n}\n","const BASE_URL = `${process.env.REACT_APP_CORS_PROXY_URL}https://theflix.to`;\n\nasync function findContent(searchTerm, type) {\n    try {\n        const term = searchTerm.toLowerCase()\n        const tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/search/${type === 'show' ? 'tv' : type}?query=${term}`).then(d => d.text());\n\n        const doc = new DOMParser().parseFromString(tmdbRes, 'text/html');\n        const nodes = Array.from(doc.querySelectorAll('div.results > div > div.wrapper'));\n        const results = nodes.slice(0, 5).map((node) => {\n            let type = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('data-media-type');\n            type = type === 'tv' ? 'show' : type;\n\n            let title;\n            let year;\n            let slug;\n\n            if (type === 'movie') {\n                try {\n                    title = node.querySelector('div.details > div.wrapper > div.title > div > a').textContent;\n                    year = node.querySelector('div.details > div.wrapper > div.title > span').textContent.trim().split(' ')[2];\n                    slug = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('href').split('/')[2];\n                } catch (e) {\n                    // eslint-disable-next-line array-callback-return\n                    return;\n                }\n            } else if (type === 'show') {\n                try {\n                    title = node.querySelector('div.details > div.wrapper > div.title > div > a > h2').textContent;\n                    year = node.querySelector('div.details > div.wrapper > div.title > span').textContent.trim().split(' ')[2];\n                    slug = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('href').split('/')[2];\n                } catch (e) {\n                    // eslint-disable-next-line array-callback-return\n                    return;\n                }\n            }\n\n            return {\n                type: type,\n                title: title,\n                year: year,\n                slug: slug + '-' + title.replace(/[^a-z0-9]+|\\s+/gmi, \" \").replace(/\\s+/g, '-').toLowerCase(),\n                source: 'theflix'\n            }\n        });\n\n        if (results.length > 1) {\n            return { options: results };\n        } else {\n            return { options: [ results[0] ] }\n        }\n    } catch (err) {\n        console.error(err);\n        throw new Error(err)\n    }\n}\n\nasync function getEpisodes(slug) {\n    let tmdbRes;\n    \n    try {\n        tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug}/seasons`).then(d => d.text());\n    } catch (err) {\n        tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug.split('-')[0]}/seasons`).then(d => d.text());\n\n        if (tmdbRes)\n            slug = slug.split('-')[0];\n    }\n\n    const sNodes = Array.from(new DOMParser().parseFromString(tmdbRes, 'text/html').querySelectorAll('div.column_wrapper > div.flex > div'));\n\n    let seasons = [];\n    let episodes = [];\n\n    for (let s of sNodes) {\n        const text = s.querySelector('div > section > div > div > div > h2 > a').textContent;\n        if (!text.includes('Season')) continue;\n\n        const season = text.split(' ')[1];\n\n        if (!seasons.includes(season)) {\n            seasons.push(season);\n        }\n\n        if (!episodes[season]) {\n            episodes[season] = [];\n        }\n        \n        const epRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug}/season/${season}`).then(d => d.text());\n        const epNodes = Array.from(new DOMParser().parseFromString(epRes, 'text/html').querySelectorAll('div.episode_list > div.card'));\n        epNodes.forEach((e, i) => episodes[season].push(++i));\n    }\n    \n    return { seasons, episodes };\n}\n\nasync function getStreamUrl(slug, type, season, episode) {\n    let url;\n\n    if (type === 'show') {\n        url = `${BASE_URL}/tv-show/${slug}/season-${season}/episode-${episode}`;\n    } else {\n        url = `${BASE_URL}/movie/${slug}?movieInfo=${slug}`;\n    }\n\n    const res = await fetch(url).then(d => d.text());\n\n    const scripts = Array.from(new DOMParser().parseFromString(res, \"text/html\").querySelectorAll('script'));\n    const prop = scripts.find((e) => e.textContent.includes(\"theflixvd.b-cdn\"));\n\n    if (prop) {\n        const data = JSON.parse(prop.textContent);\n        return { url: data.props.pageProps.videoUrl };\n    }\n\n    return { url: '' }\n}\n\nconst theflix = { findContent, getStreamUrl, getEpisodes }\nexport default theflix;\n","const BASE_URL = `https://trailers.to/video/cloudstream/tmdb`;\r\n\r\nasync function findContent(searchTerm, type) {\r\n    try {\r\n        const term = searchTerm.toLowerCase()\r\n        const tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/search/${type === 'show' ? 'tv' : type}?query=${term}`).then(d => d.text());\r\n\r\n        const doc = new DOMParser().parseFromString(tmdbRes, 'text/html');\r\n        const nodes = Array.from(doc.querySelectorAll('div.results > div > div.wrapper'));\r\n        const results = nodes.slice(0, 5).map((node) => {\r\n            let type = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('data-media-type');\r\n            type = type === 'tv' ? 'show' : type;\r\n\r\n            let title;\r\n            let year;\r\n            let slug;\r\n\r\n            if (type === 'movie') {\r\n                try {\r\n                    title = node.querySelector('div.details > div.wrapper > div.title > div > a').textContent;\r\n                    year = node.querySelector('div.details > div.wrapper > div.title > span').textContent.trim().split(' ')[2];\r\n                    slug = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('href').split('/')[2];\r\n                } catch (e) {\r\n                    // eslint-disable-next-line array-callback-return\r\n                    return;\r\n                }\r\n            } else if (type === 'show') {\r\n                try {\r\n                    title = node.querySelector('div.details > div.wrapper > div.title > div > a > h2').textContent;\r\n                    year = node.querySelector('div.details > div.wrapper > div.title > span').textContent.trim().split(' ')[2];\r\n                    slug = node.querySelector('div.details > div.wrapper > div.title > div > a').getAttribute('href').split('/')[2];\r\n                } catch (e) {\r\n                    // eslint-disable-next-line array-callback-return\r\n                    return;\r\n                }\r\n            }\r\n\r\n            return {\r\n                type: type,\r\n                title: title,\r\n                year: year,\r\n                slug: slug + '-' + title.replace(/[^a-z0-9]+|\\s+/gmi, \" \").replace(/\\s+/g, '-').toLowerCase(),\r\n                source: 'trailersto'\r\n            }\r\n        });\r\n\r\n        if (results.length > 1) {\r\n            return { options: results };\r\n        } else {\r\n            return { options: [ results[0] ] }\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        throw new Error(err)\r\n    }\r\n}\r\n\r\nasync function getEpisodes(slug) {\r\n    let tmdbRes;\r\n    \r\n    try {\r\n        tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug}/seasons`).then(d => d.text());\r\n    } catch (err) {\r\n        tmdbRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug.split('-')[0]}/seasons`).then(d => d.text());\r\n\r\n        if (tmdbRes)\r\n            slug = slug.split('-')[0];\r\n    }\r\n\r\n    const sNodes = Array.from(new DOMParser().parseFromString(tmdbRes, 'text/html').querySelectorAll('div.column_wrapper > div.flex > div'));\r\n\r\n    let seasons = [];\r\n    let episodes = [];\r\n\r\n    for (let s of sNodes) {\r\n        const text = s.querySelector('div > section > div > div > div > h2 > a').textContent;\r\n        if (!text.includes('Season')) continue;\r\n\r\n        const season = text.split(' ')[1];\r\n\r\n        if (!seasons.includes(season)) {\r\n            seasons.push(season);\r\n        }\r\n\r\n        if (!episodes[season]) {\r\n            episodes[season] = [];\r\n        }\r\n        \r\n        const epRes = await fetch(`${process.env.REACT_APP_CORS_PROXY_URL}https://www.themoviedb.org/tv/${slug}/season/${season}`).then(d => d.text());\r\n        const epNodes = Array.from(new DOMParser().parseFromString(epRes, 'text/html').querySelectorAll('div.episode_list > div.card'));\r\n        epNodes.forEach((e, i) => episodes[season].push(++i));\r\n    }\r\n    \r\n    return { seasons, episodes };\r\n}\r\n\r\nasync function getStreamUrl(slug, type, season, episode) {\r\n    let url;\r\n    let data;\r\n\r\n    if (type === 'show') {\r\n        data = await fetch(`https://trailers.to/subtitles/cloudstream/tmdb/${slug.split('-')[0]}/S${season}E${episode}`).then((d) => d.json());\r\n    } else {\r\n        data = await fetch(`https://trailers.to/subtitles/cloudstream/tmdb/${slug.split('-')[0]}`).then((d) => d.json());\r\n    }\r\n\r\n    const subs = data?.filter((sub) => {\r\n        if (typeof sub.MetaInfo.SubDownloadLink === 'object') return false;\r\n        return sub.LanguageCode === 'en' || sub.LanguageCode === 'ar';\r\n    })\r\n\r\n    if (type === 'show') {\r\n        url = await fetch(`${BASE_URL}/${slug.split('-')[0]}/S${season}E${episode}`).then((response) => response.url);\r\n    } else {\r\n        url = await fetch(`${BASE_URL}/${slug.split('-')[0]}`).then((response) => response.url);\r\n    }\r\n    \r\n    if (url) {\r\n        return { url: url, subtitles: subs };\r\n    }\r\n\r\n    return { url: '' }\r\n}\r\n\r\nconst trailersto = { findContent, getStreamUrl, getEpisodes };\r\nexport default trailersto;\r\n","import Fuse from 'fuse.js'\r\n\r\nconst BASE_URL = `https://xemovie.co`;\r\nconst CORS_URL = `${process.env.REACT_APP_CORS_PROXY_URL}${BASE_URL}`;\r\nlet phpsessid;\r\n\r\nasync function findContent(searchTerm, type) {\r\n    try {\r\n        const searchPage = await fetch(`${CORS_URL}/search?q=${type === \"movie\" ? encodeURIComponent(searchTerm) : encodeURIComponent(searchTerm)}`).then(r => r.text());\r\n    \r\n        // Parse DOM to find search results on full search page\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(searchPage, \"text/html\");\r\n        const nodes = Array.from(doc.getElementById(`${type === 'show' ? '\"serie\"' : '\"movie\"'}`).parentElement.parentElement.querySelectorAll(\"div.grid.grid-cols-2.md\\\\:grid-cols-3.lg\\\\:grid-cols-4.gap-3.flow-root.mt-5 > div\"));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                type,\r\n                title: node.querySelector('a.text-white.text-base.font-semibold').innerText.trim(),\r\n                year: node.querySelector('.float-right.text-neutral-dark.text-sm.font-normal').innerText.trim(),\r\n                slug: node.querySelector('a').href.split('/').pop(),\r\n            }\r\n        });\r\n    \r\n        const fuse = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n        const matchedResults = fuse\r\n            .search(searchTerm.toString())\r\n            .map((result) => result.item);\r\n    \r\n        if (matchedResults.length === 0) {\r\n            return { options: [] }\r\n        }\r\n    \r\n        if (matchedResults.length > 1) {\r\n            const res = { options: [] };\r\n    \r\n            matchedResults.forEach((r) => res.options.push({\r\n                title: r.title,\r\n                slug: r.slug,\r\n                type: r.type,\r\n                year: r.year,\r\n                source: 'xemovie'\r\n            }));\r\n    \r\n            return res;\r\n        } else {\r\n            const { title, slug, type, year } = matchedResults[0];\r\n    \r\n            return {\r\n                options: [{ title, slug, type, year, source: 'xemovie' }]\r\n            }\r\n        }\r\n    } catch (e) {\r\n        return { options: [] }\r\n    }\r\n}\r\nasync function getVideoUrl(config) {\r\n    let url = '';\r\n\r\n    if (config.type === 'movie') {\r\n        url = `${CORS_URL}/movies/${config.id}/watch`;\r\n    } else if (config.type === 'show') {\r\n        url = `${CORS_URL}/tv-shows/${config.id}/watch`;\r\n    }\r\n    \r\n    const res = await fetch(url).then(d => d.text());\r\n\r\n    const scripts = Array.from(new DOMParser().parseFromString(res, \"text/html\").querySelectorAll('script'));\r\n    const prop = scripts.find((e) => e.textContent.includes(\"s3.xemovie.com\"));\r\n\r\n    let data = '';\r\n\r\n    if (prop) {\r\n        data = prop.textContent.replace(/\\s+/g, '').split(',').find((e) => e.includes(\"s3.xemovie.com\")).split('\"').find((e) => e.includes('s3.xemovie.com'))\r\n        if (data.endsWith(\".m3u8\")) data = \"\";\r\n        return { videoUrl: data };\r\n    }\r\n\r\n    return { url: '',  }\r\n}\r\n\r\nasync function getEpisodes(slug) {\r\n    const url = `${CORS_URL}/tv-shows/${slug}`;\r\n    const pageReq = await fetch(url, {\r\n        headers: { phpsessid },\r\n    }).then((d) => d.text());\r\n\r\n    const parser = new DOMParser();\r\n        const doc = parser.parseFromString(pageReq, \"text/html\");\r\n        const nodes = Array.from(doc.querySelectorAll(\"div.grid.grid-cols-3.gap-3 > a\"));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                title: node.innerText.trim(),\r\n                episode: node.innerText.split(' ').pop().trim(),\r\n                id: node.href.split('/').slice(-2).reverse().pop(),\r\n                season: \"1\",\r\n            }\r\n        });\r\n    \r\n        const data = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n\r\n    let seasons = [];\r\n    let episodes = [];\r\n    data._docs.forEach((e) => {\r\n        if (!seasons.includes(e.season))\r\n            seasons.push(e.season);\r\n\r\n        if (!episodes[e.season])\r\n            episodes[e.season] = []\r\n        episodes[e.season].push(e.episode)\r\n    })\r\n\r\n    return { seasons, episodes }\r\n}\r\n\r\nasync function getStreamUrl(slug, type, season, episode) {\r\n    let id = '';\r\n\r\n    if (type === \"movie\") {\r\n        id = slug;\r\n    }\r\n\r\n    if (type === \"show\") {\r\n        const url = `${CORS_URL}/${type === 'show' ? 'tv-shows' : 'movies'}/${slug}`;\r\n        const pageRes = await fetch(url);\r\n        if (pageRes.headers.get('phpsessid')) phpsessid = pageRes.headers.get('phpsessid');\r\n        const pageResText = await pageRes.text();\r\n\r\n        // Parse DOM to find search results on full search page\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(pageResText, \"text/html\");\r\n        const nodes = Array.from(doc.querySelectorAll(\"div.grid.grid-cols-3.gap-3 > a\"));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                title: node.innerText.trim(),\r\n                episode: node.innerText.split(' ').pop().trim(),\r\n                id: node.href.split('/').slice(-2).reverse().pop(),\r\n                season: \"1\",\r\n            }\r\n        });\r\n    \r\n        const data = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n\r\n        const episodeObj = data._docs.find((v) => { return v.season === season && v.episode === episode; });\r\n\r\n        if (episodeObj) {\r\n            id = episodeObj.id;\r\n        }\r\n    }\r\n\r\n    if (id === '') {\r\n        return { url: '' }\r\n    }\r\n\r\n    const videoUrl = await getVideoUrl({\r\n        slug: slug,\r\n        id: id,\r\n        type: type,\r\n    }); \r\n\r\n    return { url: videoUrl.videoUrl };\r\n}\r\n\r\n\r\nconst xemovie = { findContent, getStreamUrl, getEpisodes };\r\nexport default xemovie;\r\n","import Fuse from 'fuse.js'\r\n\r\nconst BASE_URL = `https://akwam.io`;\r\nconst CORS_URL = `${process.env.REACT_APP_CORS_PROXY_URL}${BASE_URL}`;\r\nlet phpsessid;\r\n\r\nasync function findContent(searchTerm, type) {\r\n    try {\r\n        const searchUrl = `${CORS_URL}/search?q=${encodeURIComponent(searchTerm)}`;\r\n        const searchRes = await fetch(searchUrl).then((d) => d.text());\r\n    \r\n        // Parse DOM to find search results on full search page\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(searchRes, \"text/html\");\r\n        const nodes = Array.from(doc.querySelectorAll('.col-lg-auto.col-md-4.col-6.mb-12'));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                type,\r\n                title: node.querySelector('a.text-white').innerText.trim(),\r\n                year: node.querySelector('span.badge.badge-pill.badge-secondary.ml-1').innerText.trim(),\r\n                slug: node.querySelector('a').href.split('/').slice(-2).reverse().pop()+\"/\"+node.querySelector('a').href.split('/').pop(),\r\n            }\r\n        });\r\n    \r\n        const fuse = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n        const matchedResults = fuse\r\n            .search(searchTerm.toString())\r\n            .map((result) => result.item);\r\n    \r\n        if (matchedResults.length === 0) {\r\n            return { options: [] }\r\n        }\r\n    \r\n        if (matchedResults.length > 1) {\r\n            const res = { options: [] };\r\n    \r\n            matchedResults.forEach((r) => res.options.push({\r\n                title: r.title,\r\n                slug: r.slug,\r\n                type: r.type,\r\n                year: r.year,\r\n                source: 'akwam'\r\n            }));\r\n    \r\n            return res;\r\n        } else {\r\n            const { title, slug, type, year } = matchedResults[0];\r\n    \r\n            return {\r\n                options: [{ title, slug, type, year, source: 'akwam' }]\r\n            }\r\n        }\r\n    } catch (e) {\r\n        return { options: [] }\r\n    }\r\n}\r\nasync function getVideoUrl(config) {\r\n    let surl = '';\r\n\r\n    if (config.type === 'movie') {\r\n        surl = `${CORS_URL}/movie/${config.id}`;\r\n    } else if (config.type === 'show') {\r\n        surl = `${CORS_URL}/episode/${config.id}`;\r\n    }\r\n    \r\n    const pageReq = await fetch(surl, {\r\n        headers: { phpsessid },\r\n    }).then((d) => d.text());\r\n\r\n    const parser = new DOMParser();\r\n        const doc = parser.parseFromString(pageReq, \"text/html\");\r\n        const node = Array.from(doc.querySelectorAll('#tab-4'))[0].querySelectorAll('a.link-btn.link-show.d-flex.align-items-center.px-3')[0].href.split('/').pop();\r\n\r\n    let url = '';\r\n\r\n    if (config.type === 'movie') {\r\n        url = `${CORS_URL}/download/${node}/${config.id}`;\r\n    } else if (config.type === 'show') {\r\n        url = `${CORS_URL}/download/${node}/${config.id}`;\r\n    }\r\n\r\n    const data = await fetch(url, {\r\n        headers: { phpsessid },\r\n    }).then((d) => d.text());\r\n\r\n    const videoDoc = parser.parseFromString(data, \"text/html\");\r\n    const videoUrl = Array.from(videoDoc.querySelectorAll('a.font-size-16.text-muted'))[0].href;    \r\n\r\n    return {\r\n        videoUrl: videoUrl,\r\n    };\r\n}\r\n\r\nasync function getEpisodes(slug) {\r\n    const url = `${CORS_URL}/series/${slug}`;\r\n    const pageReq = await fetch(url, {\r\n        headers: { phpsessid },\r\n    }).then((d) => d.text());\r\n\r\n    const parser = new DOMParser();\r\n        const doc = parser.parseFromString(pageReq, \"text/html\");\r\n        const nodes = Array.from(doc.querySelectorAll('.bg-primary2.p-4.col-lg-4.col-md-6.col-12'));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                title: node.querySelector('img.img-fluid').alt.split(' : ')[1].trim(),\r\n                episode: node.querySelector('img.img-fluid').alt.split(' : ')[0].trim(),\r\n                id: node.querySelector('a').href.split('/').slice(-2).reverse().pop()+\"/\"+node.querySelector('a').href.split('/').pop(),\r\n                season: \"1\",\r\n            }\r\n        });\r\n    \r\n        const data = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n\r\n    let seasons = [];\r\n    let episodes = [];\r\n    data._docs.forEach((e) => {\r\n        if (!seasons.includes(e.season))\r\n            seasons.push(e.season);\r\n\r\n        if (!episodes[e.season])\r\n            episodes[e.season] = []\r\n        episodes[e.season].push(e.episode)\r\n    })\r\n\r\n    return { seasons, episodes }\r\n}\r\n\r\nasync function getStreamUrl(slug, type, season, episode) {\r\n    let id = '';\r\n\r\n    if (type === \"movie\") {\r\n        id = slug;\r\n    }\r\n\r\n    if (type === \"show\") {\r\n        const url = `${CORS_URL}/${type === 'show' ? 'series' : type}/${slug}`;\r\n        const pageRes = await fetch(url);\r\n        if (pageRes.headers.get('phpsessid')) phpsessid = pageRes.headers.get('phpsessid');\r\n        const pageResText = await pageRes.text();\r\n\r\n        // Parse DOM to find search results on full search page\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(pageResText, \"text/html\");\r\n        const nodes = Array.from(doc.querySelectorAll('.bg-primary2.p-4.col-lg-4.col-md-6.col-12'));\r\n        const results = nodes.map(node => {\r\n            return {\r\n                title: node.querySelector('img.img-fluid').alt.split(' : ')[1].trim(),\r\n                episode: node.querySelector('img.img-fluid').alt.split(' : ')[0].trim(),\r\n                id: node.querySelector('a').href.split('/').slice(-2).reverse().pop()+\"/\"+node.querySelector('a').href.split('/').pop(),\r\n                season: \"1\",\r\n            }\r\n        });\r\n    \r\n        const data = new Fuse(results, { threshold: 0.3, distance: 200, keys: [\"title\"] });\r\n\r\n        const episodeObj = data._docs.find((v) => { return v.season === season && v.episode === episode; });\r\n\r\n        if (episodeObj) {\r\n            id = episodeObj.id;\r\n        }\r\n    }\r\n    \r\n    if (id === '') {\r\n        return { url: '' }\r\n    }\r\n\r\n    const videoUrl = await getVideoUrl({\r\n        slug: slug,\r\n        id: id,\r\n        type: type,\r\n    }); \r\n\r\n    return { url: videoUrl.videoUrl };\r\n}\r\n\r\n\r\nconst akwam = { findContent, getStreamUrl, getEpisodes };\r\nexport default akwam;\r\n","import theflix from './scraper/theflix';\r\nimport trailersto from './scraper/trailersto';\r\nimport xemovie from './scraper/xemovie';\r\nimport akwam from './scraper/akwam';\r\n\r\nasync function findContent(searchTerm, type) {\r\n    const results = { options: []};\r\n    const content = await Promise.all([\r\n        trailersto.findContent(searchTerm, type),\r\n        theflix.findContent(searchTerm, type),\r\n        xemovie.findContent(searchTerm, type),\r\n        akwam.findContent(searchTerm, type),\r\n    ]);\r\n\r\n    content.forEach((o) => {\r\n        if (!o || !o.options) return;\r\n\r\n        o.options.forEach((i) => {\r\n            if (!i) return;\r\n            results.options.push(i)\r\n        })\r\n    });\r\n\r\n    return results;\r\n}\r\n\r\nasync function getStreamUrl(slug, type, source, season, episode) {\r\n    switch (source) { \r\n        case 'trailersto':\r\n            return await trailersto.getStreamUrl(slug, type, season, episode);        \r\n        case 'theflix':\r\n            return await theflix.getStreamUrl(slug, type, season, episode);\r\n        case 'xemovie':\r\n            return await xemovie.getStreamUrl(slug, type, season, episode);\r\n        case 'akwam':\r\n            return await akwam.getStreamUrl(slug, type, season, episode);\r\n        default:\r\n            return;\r\n    }\r\n}\r\n\r\nasync function getEpisodes(slug, source) {\r\n    switch (source) {\r\n        case 'trailersto':\r\n            return await trailersto.getEpisodes(slug);\r\n        case 'theflix':\r\n            return await theflix.getEpisodes(slug);\r\n        case 'xemovie':\r\n            return await xemovie.getEpisodes(slug);\r\n        case 'akwam':\r\n            return await akwam.getEpisodes(slug);\r\n        default:\r\n            return;\r\n    }\r\n}\r\n\r\nexport { findContent, getStreamUrl, getEpisodes }","import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Redirect, useHistory, useRouteMatch } from 'react-router-dom';\nimport { Arrow } from '../components/Arrow';\nimport { Card } from '../components/Card';\nimport { ErrorBanner } from '../components/ErrorBanner';\nimport { InputBox } from '../components/InputBox';\nimport { MovieRow } from '../components/MovieRow';\nimport { Progress } from '../components/Progress';\nimport { Title } from '../components/Title';\nimport { TypeSelector } from '../components/TypeSelector';\nimport { useMovie } from '../hooks/useMovie';\nimport { findContent, getEpisodes, getStreamUrl } from '../lib/index';\nimport { VideoProgressStore } from '../lib/storage/VideoProgress'\n\nimport './Search.css';\n\nexport function SearchView() {\n    const { navigate, setStreamUrl, setStreamData } = useMovie();\n\n    const history = useHistory();\n    const routeMatch = useRouteMatch('/:type');\n    const type = routeMatch?.params?.type;\n    const streamRouteMatch = useRouteMatch('/:type/:source/:title/:slug');\n\n    const maxSteps = 4;\n    const [options, setOptions] = React.useState([]);\n    const [progress, setProgress] = React.useState(0);\n    const [text, setText] = React.useState(\"\");\n    const [failed, setFailed] = React.useState(false);\n    const [showingOptions, setShowingOptions] = React.useState(false);\n    const [errorStatus, setErrorStatus] = React.useState(false);\n    const [page, setPage] = React.useState('search');\n    const [continueWatching, setContinueWatching] = React.useState([])\n\n    const fail = (str) => {\n        setProgress(maxSteps);\n        setText(str)\n        setFailed(true)\n    }\n\n    async function getStream(title, slug, type, source, year) {\n        setStreamUrl(\"\");\n\n        try {\n            setProgress(2);\n            setText(`Getting stream for \"${title}\"`);\n\n            let seasons = [];\n            let episodes = [];\n            if (type === \"show\") {\n                const data = await getEpisodes(slug, source);\n                seasons = data.seasons;\n                episodes = data.episodes;\n            }\n\n            let realUrl = '';\n            let subtitles = []\n\n            if (type === \"movie\") {\n                const { url, subtitles: subs } = await getStreamUrl(slug, type, source);\n\n                if (url === '') {\n                    return fail(`Not found: ${title}`)\n                }\n\n                realUrl = url;\n                subtitles = subs\n            }\n\n            setProgress(maxSteps);\n            setStreamUrl(realUrl);\n            setStreamData({\n                title,\n                type,\n                seasons,\n                episodes,\n                slug,\n                source,\n                year,\n                subtitles\n            })\n            setText(`Streaming...`)\n            navigate(\"movie\")\n        } catch (err) {\n            console.error(err);\n            fail(\"Failed to get stream\")\n        }\n    }\n\n    async function searchMovie(query, contentType) {\n        setFailed(false);\n        setText(`Searching for ${contentType} \"${query}\"`);\n        setProgress(1)\n        setShowingOptions(false)\n\n        try {\n            const { options } = await findContent(query, contentType);\n\n            if (options.length === 0) {\n                return fail(`Could not find that ${contentType}`)\n            } else if (options.length > 1) {\n                setProgress(2);\n                setText(`Choose your ${contentType}`);\n                setOptions(options);\n                setShowingOptions(true);\n                return;\n            }\n\n            const { title, slug, type, source, year } = options[0];\n            history.push(`${routeMatch.url}/${source}/${title}/${slug}`);\n            getStream(title, slug, type, source, year);\n        } catch (err) {\n            console.error(err);\n            fail(`Failed to find ${contentType}`)\n        }\n    }\n\n    React.useEffect(() => {\n        async function fetchHealth() {\n            await fetch(process.env.REACT_APP_CORS_PROXY_URL).catch(() => {\n                // Request failed; source likely offline\n                setErrorStatus(`Content provider is currently offline, please try again later.`)\n            })\n        }\n        fetchHealth()\n    }, []);\n\n    React.useEffect(() => {\n        if (streamRouteMatch) {\n            if (streamRouteMatch?.params.type === 'movie' || streamRouteMatch.params.type === 'show') getStream(streamRouteMatch.params.title, streamRouteMatch.params.slug, streamRouteMatch.params.type, streamRouteMatch.params.source);\n            else return setErrorStatus(\"Failed to find movie. Please try searching below.\");\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        const progressData = VideoProgressStore.get();\n        let newContinueWatching = []\n\n        Object.keys(progressData).forEach((source) => {\n            const all = [\n                ...Object.entries(progressData[source]?.show ?? {}),\n                ...Object.entries(progressData[source]?.movie ?? {})\n            ];\n\n            for (const [slug, data] of all) {\n                for (let subselection of Object.values(data)) {\n                    let entry = {\n                        slug,\n                        data: subselection,\n                        type: subselection.show ? 'show' : 'movie',\n                        percentageDone: Math.floor((subselection.currentlyAt / subselection.totalDuration) * 100),\n                        source\n                    }\n\n                    // due to a constraint with incompatible localStorage data,\n                    // we must quit here if episode and season data is not included\n                    // in the show's data. watching the show will resolve.\n                    if (!subselection.meta) continue;\n\n                    if (entry.percentageDone < 90) {\n                        newContinueWatching.push(entry)\n                        // begin next episode logic\n                    } else {\n                        // we can't do next episode for movies!\n                        if (!subselection.show) continue;\n\n                        let newShow = {};\n\n                        // if the current season has a next episode, load it\n                        if (subselection.meta.episodes[subselection.show.season].includes(`${parseInt(subselection.show.episode) + 1}`)) {\n                            newShow.season = subselection.show.season;\n                            newShow.episode = `${parseInt(subselection.show.episode) + 1}`;\n                            entry.percentageDone = 0;\n                            // if the current season does not have a next epsiode, and the next season has a first episode, load that\n                        } else if (subselection.meta.episodes?.[`${parseInt(subselection.show.season) + 1}`]?.[0]) {\n                            newShow.season = `${parseInt(subselection.show.season) + 1}`;\n                            newShow.episode = subselection.meta.episodes[`${parseInt(subselection.show.season) + 1}`][0];\n                            entry.percentageDone = 0;\n                            // the next episode does not exist\n                        } else {\n                            continue;\n                        }\n\n                        // assign the new episode and season data\n                        entry.data.show = { ...newShow };\n\n                        // if the next episode exists, continue. we don't want to end up with duplicate data.\n                        let nextEpisode = progressData?.[source]?.show?.[slug]?.[`${entry.data.show.season}-${entry.data.show.episode}`];\n                        if (nextEpisode) continue;\n\n                        newContinueWatching.push(entry);\n                    }\n                }\n            }\n\n            newContinueWatching = newContinueWatching.sort((a, b) => {\n                return b.data.updatedAt - a.data.updatedAt\n            });\n\n            setContinueWatching(newContinueWatching)\n        })\n    }, []);\n\n    if (!type || (type !== 'movie' && type !== 'show')) {\n        return <Redirect to=\"/show\" />\n    }\n\n    const handleKeyPress = page => event => {\n        if (event.code === 'Enter' || event.code === 'Space'){\n            setPage(page);\n        }\n    }\n\n    return (\n        <div className=\"cardView\">\n            <Helmet>\n                <title>{type === 'movie' ? 'Movies' : 'Shows'} | Alex</title>\n            </Helmet>\n\n            {/* Nav */}\n            <nav>\n                <span className={page === 'search' ? 'selected-link' : ''} onClick={() => setPage('search')} onKeyPress={handleKeyPress('search')} tabIndex={0}>Search</span>\n                {continueWatching.length > 0 ?\n                    <span className={page === 'watching' ? 'selected-link' : ''} onClick={() => setPage('watching')} onKeyPress={handleKeyPress('watching')} tabIndex={0}>Continue Watching</span>\n                    : ''}\n            </nav>\n\n            {/* Search */}\n            {page === 'search' ?\n                <React.Fragment>\n                    <Card>\n                        {errorStatus ? <ErrorBanner>{errorStatus}</ErrorBanner> : ''}\n                        <Title accent=\"🤭 مات هالاسبوع\">\n                            What do you wanna watch?\n                        </Title>\n                        <TypeSelector\n                            setType={(type) => history.push(`/${type}`)}\n                            choices={[\n                                { label: \"TV Show\", value: \"show\" },\n                                { label: \"Movie\", value: \"movie\" }\n                            ]}\n                            noWrap={true}\n                            selected={type}\n                        />\n                        <InputBox placeholder={type === \"movie\" ? \"Search Movies...\" : \"Search Shows...\"} onSubmit={(str) => searchMovie(str, type)} />\n                        <Progress show={progress > 0} failed={failed} progress={progress} steps={maxSteps} text={text} />\n                    </Card>\n\n                    <Card show={showingOptions} doTransition>\n                        <Title size=\"medium\">\n                            Results for {type}s like that\n                        </Title>\n                        {Object.entries(options.reduce((a, v) => {\n                            if (!a[v.source]) a[v.source] = []\n                            a[v.source].push(v)\n                            return a;\n                        }, {})).map(v => (\n                            <div key={v[0]}>\n                                <p className=\"source\">{v[0]}</p>\n                                {v[1].map((v, i) => (\n                                    <MovieRow key={i} title={v.title} slug={v.slug} type={v.type} year={v.year} source={v.source} onClick={() => {\n                                        history.push(`${routeMatch.url}/${v.source}/${v.title}/${v.slug}`);\n                                        setShowingOptions(false)\n                                        getStream(v.title, v.slug, v.type, v.source, v.year)\n                                    }} />\n                                ))}\n                            </div>\n                        ))}\n                    </Card>\n                </React.Fragment> : <React.Fragment />}\n\n            {/* Continue watching */}\n            {continueWatching.length > 0 && page === 'watching' ? <Card>\n                <Title>Continue Watching</Title>\n                <Progress show={progress > 0} failed={failed} progress={progress} steps={maxSteps} text={text} />\n                {continueWatching?.map((v, i) => (\n                    <>\n                        <MovieRow key={i} title={v.data.meta.title} slug={v.data.meta.slug} type={v.type} year={v.data.meta.year} source={v.source} place={v.data.show} percentage={v.percentageDone} deletable onClick={() => {\n                            if (v.type === 'show') {\n                                history.push(`/show/${v.source}/${v.data.meta.title}/${v.slug}/season/${v.data.show.season}/episode/${v.data.show.episode}`)\n                            } else {\n                                history.push(`/movie/${v.source}/${v.data.meta.title}/${v.slug}`)\n                            }\n\n                            setShowingOptions(false)\n                            getStream(v.data.meta.title, v.data.meta.slug, v.type, v.source, v.data.meta.year)\n                        }} />\n                        <div className=\"remove\" onClick={() => {\n                        setContinueWatching(newCW => newCW.filter(d => d !== v));\n                        let progressSave = VideoProgressStore.get();\n                        if (v.type === 'show') {\n                            delete progressSave[v.source][v.type][v.slug][v.data.show.season + \"-\" + v.data.show.episode];\n                            progressSave.save();\n                        } else {\n                            delete progressSave[v.source][v.type][v.slug]['full'];\n                            progressSave.save();\n                        }\n\n                        if (progressSave[v.source] === {}){\n                            delete progressSave[v.source];\n                            progressSave.save();\n                            window.location.reload();\n                        }\n                            \n                        if (progressSave[v.source][v.type] === {}){\n                            delete progressSave[v.source][v.type];\n                            progressSave.save();\n                        }\n                        if (progressSave[v.source][v.type][v.slug] === {}){\n                            delete progressSave[v.source][v.type][v.slug];\n                            progressSave.save();\n                        }\n                    }}>\n                            <p style={{color:\"var(--failed)\"}}>Remove</p>\n                            <p style={{paddingLeft:\".5rem\",color:\"var(--text-secondary)\"}}>{v.data.meta.title} ({v.data.meta.year}) {v.type === 'show' ? ` - S${v.data.show.season}:E${v.data.show.episode}` : ''}</p>\n                    </div>\n                    </>\n                ))}\n            </Card> : <React.Fragment></React.Fragment>}\n\n            <div className=\"topRightCredits\">\n                <a href=\"https://alex-i7.cf/shows\" target=\"_blank\" rel=\"noreferrer\">Old Website <Arrow /></a>\n                {/* <br />\n                <a href=\"https://discord.gg/HTWuC4V5BR\" target=\"_blank\" rel=\"noreferrer\">Discord Server <Arrow /></a> */}\n            </div>\n        </div>\n    )\n}\n","import React from 'react'\nimport './VideoPlaceholder.css'\n\nexport function VideoPlaceholder(props) {\n\treturn (\n\t\t<div className=\"videoPlaceholder\">\n\t\t\t<div className=\"videoPlaceholderBox\">\n\t\t\t\t<p>{props.children}</p>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import React from 'react'\nimport Hls from 'hls.js'\nimport { VideoPlaceholder } from './VideoPlaceholder'\n\nimport './VideoElement.css'\n\n// streamUrl: string\n// loading: boolean\n// setProgress: (event: NativeEvent) => void\n// videoRef: useRef\n// startTime: number\nexport function VideoElement({ streamUrl, loading, setProgress, videoRef, startTime, streamData }) {\n    const [error, setError] = React.useState(false);\n\n    function onLoad() {\n        if (startTime)\n            videoRef.current.currentTime = startTime;\n    }\n\n    React.useEffect(() => {\n        if (!streamUrl.includes('.mp4')) {\n            if (!streamUrl.includes('cloudstream')) {\n                setError(false)\n                if (!videoRef || !videoRef.current || !streamUrl || streamUrl.length === 0 || loading) return;\n                \n                const hls = new Hls();\n                \n                if (!Hls.isSupported() && videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n                    videoRef.current.src = streamUrl;\n                    return;\n                } else if (!Hls.isSupported()) {\n                    setError(true)\n                    return;\n                }\n                \n                hls.attachMedia(videoRef.current);\n                hls.loadSource(streamUrl);\n            }\n        }\n    }, [videoRef, streamUrl, loading]);\n\n    if (error)\n        return (<VideoPlaceholder>Your browser is not supported</VideoPlaceholder>)\n\n    if (loading)\n        return <VideoPlaceholder>Loading episode...</VideoPlaceholder>\n    \n    if (!streamUrl || streamUrl.length === 0)\n        return <VideoPlaceholder>Couldn't load video</VideoPlaceholder>\n\n    if (!streamUrl.includes('.mp4')) {\n        return (\n            <video crossOrigin=\"anonymous\" className=\"videoElement\" ref={videoRef} controls autoPlay onProgress={setProgress} onLoadedData={onLoad}>\n                { streamData.subtitles && streamData.subtitles.map((sub, index) => <track key={index} kind=\"captions\" label={sub.MetaInfo.LanguageName} src={`https://trailers.to/subtitles/${sub.ContentHash}/${sub.MetaInfo.LanguageName}.srt`} />) }\n            </video>            \n        )\n    } else {\n        if (streamUrl.includes('cloudstream')) {\n            return (\n                <video crossOrigin=\"anonymous\" className=\"videoElement\" ref={videoRef} controls autoPlay onProgress={setProgress} onLoadedData={onLoad}>\n                    { streamData.subtitles && streamData.subtitles.map((sub, index) => <track key={index} kind=\"captions\" label={sub.MetaInfo.LanguageName} src={`https://trailers.to/subtitles/${sub.ContentHash}/${sub.MetaInfo.LanguageName}.srt`} />) }\n                    <source src={streamUrl} type=\"video/mp4\" />\n                </video>\n            )\n        } else {\n            return (\n                <video className=\"videoElement\" ref={videoRef} controls autoPlay onProgress={setProgress} onLoadedData={onLoad}>\n                    { streamData.subtitles && streamData.subtitles.map((sub, index) => <track key={index} kind=\"captions\" label={sub.MetaInfo.LanguageName} src={`https://Trailers.to/subtitles/${sub.ContentHash}/${sub.MetaInfo.LanguageName}.srt`} />) }\n                    <source src={streamUrl} type=\"video/mp4\" />\n                </video>\n            )\n        }\n    }\n}\n","import React from 'react';\n// import { Arrow } from './Arrow';\nimport './NumberSelector.css'\nimport { PercentageOverlay } from './PercentageOverlay';\n\n// setType: (txt: string) => void\n// choices: { label: string, value: string }[]\n// selected: string\nexport function NumberSelector({ setType, choices, selected }) {\n    const handleKeyPress = choice => event => {\n        if (event.code === 'Space' || event.code === 'Enter'){\n            setType(choice);\n        }\n    }\n    return (\n        <div className=\"numberSelector\">\n            {choices.map(v=>(\n                <div key={v.value} className=\"choiceWrapper\" tabIndex={0} onKeyPress={handleKeyPress(v.value)}>\n                    <div className={`choice ${selected&&selected===v.value?'selected':''}`} onClick={() => setType(v.value)}>\n                        {v.label}\n                        <PercentageOverlay percentage={v.percentage} />\n                    </div>\n                </div>\n            ))}\n        </div>\n    )\n}\n","import { useRef, useState, useEffect } from \"react\"\nimport \"./SelectBox.css\"\n\nfunction Option({ option, ...props }) {\n    return (\n        <div className=\"option\" {...props}>\n            <input\n                type=\"radio\"\n                className=\"radio\"\n                id={option.id} />\n            <label htmlFor={option.id}>\n                <div className=\"item\">{option.name}</div>\n            </label>\n        </div>\n    )\n}\n\nexport function SelectBox({ options, selectedItem, setSelectedItem }) {\n    if (!Array.isArray(options)) {\n        throw new Error(\"Items must be an array!\")\n    }\n\n    const [active, setActive] = useState(false)\n\n    const containerRef = useRef();\n\n    const handleClick = e => {\n        if (containerRef.current.contains(e.target)) {\n            // inside click\n            return;\n        }\n        // outside click\n        closeDropdown()\n    };\n\n    const closeDropdown = () => {\n        setActive(false)\n    }\n\n    useEffect(() => {\n        // add when mounted\n        document.addEventListener(\"mousedown\", handleClick);\n        // return function to be called when unmounted\n        return () => {\n            document.removeEventListener(\"mousedown\", handleClick);\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const onOptionClick = (e, option, i) => {\n        e.stopPropagation()\n        setSelectedItem(i)\n        closeDropdown()\n    }\n\n    const handleSelectedKeyPress = event => {\n        if (event.code === 'Enter' || event.code === 'Space'){\n            setActive(a => !a);\n        }\n    }\n\n    const handleOptionKeyPress = (option, i) => event => {\n        if (event.code === 'Enter' || event.code === 'Space'){\n            onOptionClick(event, option, i);\n        }\n    }\n\n    return (\n        <div className=\"select-box\" ref={containerRef} onClick={() => setActive(a => !a)} >\n            <div className=\"selected\" tabIndex={0} onKeyPress={handleSelectedKeyPress}>\n                {options ? (\n                    <Option option={options[selectedItem]} />\n                ) : null}\n            </div>\n            <div className={\"options-container\" + (active ? \" active\" : \"\")}>\n                {options.map((opt, i) => (\n                    <Option option={opt} key={i} onClick={(e) => onOptionClick(e, opt, i)} tabIndex={active ? 0 : undefined} onKeyPress={active ? handleOptionKeyPress(opt, i) : undefined} />\n                ))}\n            </div>\n        </div>\n    )\n}\n","import React from 'react';\nimport { TypeSelector } from './TypeSelector';\nimport { NumberSelector } from './NumberSelector';\nimport { VideoProgressStore } from '../lib/storage/VideoProgress'\nimport { SelectBox } from '../components/SelectBox';\nimport './EpisodeSelector.css'\nimport { useWindowSize } from '../hooks/useWindowSize';\n\nexport function EpisodeSelector({ setSelectedSeason, selectedSeason, setEpisode, seasons, episodes, currentSeason, currentEpisode, streamData }) {\n    const choices = episodes ? episodes.map(v => {\n        const progressData = VideoProgressStore.get();\n        \n        let currentlyAt = 0;\n        let totalDuration = 0;\n\n        const progress = progressData?.[streamData.source]?.[streamData.type]?.[streamData.slug]?.[`${selectedSeason}-${v}`]\n\n        if (progress) {\n            currentlyAt = progress.currentlyAt\n            totalDuration = progress.totalDuration\n        }\n\n        const percentage = Math.round((currentlyAt / totalDuration) * 100)\n\n        return { \n            value: v.toString(), \n            label: v,\n            percentage\n        }\n    }) : [];\n\n    const windowSize = useWindowSize()\n\n    return (\n        <div className=\"episodeSelector\">\n            {\n                (seasons.length > 0 && (windowSize.width <= 768 || seasons.length > 4)) ? \n                (\n                    <SelectBox setSelectedItem={(index) => setSelectedSeason(seasons[index])} selectedItem={seasons.findIndex(s => s === selectedSeason)} options={seasons.map(season => { return {id: season, name: `Season ${season}` }})}/>\n                )\n                :\n                (\n                    <TypeSelector setType={setSelectedSeason} selected={selectedSeason} choices={seasons.map(v=>({ value: v.toString(), label: `Season ${v}`}))} />\n                )\n            }\n            <br></br>\n            <NumberSelector setType={(e) => setEpisode({episode: e, season: selectedSeason})} choices={choices} selected={(selectedSeason.toString() === currentSeason) ? currentEpisode : null} />\n        </div>\n    )\n}\n","import { useEffect, useState } from \"react\";\n\n// https://usehooks.com/useWindowSize/\nexport function useWindowSize() {\n    // Initialize state with undefined width/height so server and client renders match\n    // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n    const [windowSize, setWindowSize] = useState({\n      width: undefined,\n      height: undefined,\n    });\n    useEffect(() => {\n      // Handler to call on window resize\n      function handleResize() {\n        // Set window width/height to state\n        setWindowSize({\n          width: window.innerWidth,\n          height: window.innerHeight,\n        });\n      }\n      // Add event listener\n      window.addEventListener(\"resize\", handleResize);\n      // Call handler right away so state gets updated with initial window size\n      handleResize();\n      // Remove event listener on cleanup\n      return () => window.removeEventListener(\"resize\", handleResize);\n    }, []); // Empty array ensures that effect is only run on mount\n    return windowSize;\n  }","import React from 'react'\nimport { useRouteMatch, useHistory } from 'react-router-dom'\nimport { Helmet } from 'react-helmet';\nimport { Title } from '../components/Title'\nimport { Card } from '../components/Card'\nimport { useMovie } from '../hooks/useMovie'\nimport { VideoElement } from '../components/VideoElement'\nimport { EpisodeSelector } from '../components/EpisodeSelector'\nimport { getStreamUrl } from '../lib/index'\nimport { VideoProgressStore } from '../lib/storage/VideoProgress'\n\nimport './Movie.css'\n\nexport function MovieView(props) {\n    const baseRouteMatch = useRouteMatch('/:type/:source/:title/:slug');\n    const showRouteMatch = useRouteMatch('/:type/:source/:title/:slug/season/:season/episode/:episode');\n    const history = useHistory();\n\n    const { streamUrl, streamData, setStreamUrl } = useMovie();\n    const [ seasonList, setSeasonList ] = React.useState([]);\n    const [ episodeLists, setEpisodeList ] = React.useState([]);\n    const [ loading, setLoading ] = React.useState(false);\n    const [ selectedSeason, setSelectedSeason ] = React.useState(\"1\");\n    const [ startTime, setStartTime ] = React.useState(0);\n    const videoRef = React.useRef(null);\n    let isVideoTimeSet = React.useRef(false);\n\n    const season = showRouteMatch?.params.season || \"1\";\n    const episode = showRouteMatch?.params.episode || \"1\";\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    function setEpisode({ season, episode }) {\n        history.push(`${baseRouteMatch.url}/season/${season}/episode/${episode}`);\n        isVideoTimeSet.current = false;\n    }\n\n    React.useEffect(() => {\n        if (streamData.type === \"show\" && !showRouteMatch) history.replace(`${baseRouteMatch.url}/season/1/episode/1`);\n    }, [streamData.type, showRouteMatch, history, baseRouteMatch.url]);\n\n    React.useEffect(() => {\n        if (streamData.type === \"show\" && showRouteMatch) setSelectedSeason(showRouteMatch.params.season.toString());\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        let cancel = false;\n\n        if (streamData.type !== \"show\") return () => {\n            cancel = true;\n        };\n\n        if (!episode) {\n            setLoading(false);\n            setStreamUrl('');\n            return;\n        }\n\n        setLoading(true);\n        getStreamUrl(streamData.slug, streamData.type, streamData.source, season, episode)\n        .then(({ url, subtitles }) => {\n                if (cancel) return;\n                streamData.subtitles = subtitles;\n                setStreamUrl(url)\n                setLoading(false);\n            })\n            .catch((e) => {\n                if (cancel) return;\n                console.error(e)\n            })\n\n        return () => {\n            cancel = true;\n        } \n    }, [episode, streamData, setStreamUrl, season]);\n\n    React.useEffect(() => {\n        if (streamData.type === \"show\") {\n            setSeasonList(streamData.seasons);\n            setEpisodeList(streamData.episodes[selectedSeason]);\n        }\n    }, [streamData.seasons, streamData.episodes, streamData.type, selectedSeason])\n\n    React.useEffect(() => {\n        const progressData = VideoProgressStore.get();\n        let key = streamData.type === \"show\" ? `${season}-${episode}` : \"full\"\n        let time = progressData?.[streamData.source]?.[streamData.type]?.[streamData.slug]?.[key]?.currentlyAt;\n        setStartTime(time);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [baseRouteMatch, showRouteMatch]);\n\n    const setProgress = (evt) => {\n        let progressSave = VideoProgressStore.get();\n\n        if (!progressSave[streamData.source])\n            progressSave[streamData.source] = {}\n        if (!progressSave[streamData.source][streamData.type])\n            progressSave[streamData.source][streamData.type] = {}\n        if (!progressSave[streamData.source][streamData.type][streamData.slug])\n            progressSave[streamData.source][streamData.type][streamData.slug] = {}\n        \n        // Store real data\n        let key = streamData.type === \"show\" ? `${season}-${episode}` : \"full\"\n        progressSave[streamData.source][streamData.type][streamData.slug][key] = {\n            currentlyAt: Math.floor(evt.currentTarget.currentTime),\n            totalDuration: Math.floor(evt.currentTarget.duration),\n            updatedAt: Date.now(),\n            meta: streamData\n        }\n\n        if(streamData.type === \"show\") {\n            progressSave[streamData.source][streamData.type][streamData.slug][key].show = {\n                season,\n                episode\n            }\n        }\n\n        progressSave.save();\n    }\n\n    return (\n        <div className={`cardView showType-${streamData.type}`}>\n            <Helmet>\n                <title>{streamData.title}{streamData.type === 'show' ? ` | S${season}E${episode}` : ''} | Alex</title>\n            </Helmet>\n\n            <Card fullWidth>\n                <Title accent=\"Return to home\" accentLink=\"search\">\n                    {streamData.title}\n                </Title>\n                {streamData.type === \"show\" ? <Title size=\"small\">\n                    Season {season}: Episode {episode}\n                </Title> : undefined}\n\n                <VideoElement streamUrl={streamUrl} loading={loading} setProgress={setProgress} videoRef={videoRef} startTime={startTime} streamData={streamData} />\n\n                {streamData.type === \"show\" ? \n                    <EpisodeSelector\n                        setSelectedSeason={setSelectedSeason}\n                        selectedSeason={selectedSeason}\n\n                        setEpisode={setEpisode}\n\n                        seasons={seasonList}\n                        episodes={episodeLists}\n\n                        currentSeason={season}\n                        currentEpisode={episode}\n\n                        streamData={streamData}\n                    />\n                : ''}\n            </Card>\n        </div>\n    )\n}\n","import { SearchView } from './views/Search';\nimport { MovieView } from './views/Movie';\nimport { useMovie, MovieProvider } from './hooks/useMovie';\nimport './index.css';\n\nfunction Router() {\n  const { streamData } = useMovie();\n  return streamData ? <MovieView /> : <SearchView />;\n}\n\nfunction App() {\n  return (\n    <MovieProvider>\n      <Router />\n    </MovieProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<HashRouter>\n\t\t\t<App />\n\t\t</HashRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}